# Библиотеки и технологии
### Серверная часть: 
* Spring Boot для создания REST API, который будет обрабатывать запросы от клиентов.
* Spring WebSocket для поддержки WebSocket-соединений
* ~~Spring Security Для управления правами доступа и аутентификации пользователей.~~
* JACKSON Для обработки JSON (сериализация и десериализация), для обмена данными между клиентом и сервером.

### Клиентская часть (HTML/CSS/JavaScript):
* CSS-фреймворки (Bootstrap) для улучшения внешнего вида интерфейса и адаптивного дизайна.
* jQuery для упрощения работы с DOM и AJAX-запросами. 
* WebRTC для реализации передачи аудио и демонстрации экрана. передавать медиа-потоки. 
* WebSocket API Для реализации обмена сообщениями в реальном времени между клиентом и сервером.
   
# Функционал:
1. Видеопотоки
   * Возможность для каждого участника включать/выключать микрофон и камеру. 
   * Возможность перехода в режим "только аудио", если у пользователя слабое соединение.
2. Участники
   * Хост комнаты (создатель) должен иметь права, чтобы назначать или снимать ведущего, управлять доступом участников, удалять из комнаты.
   * Ограничение количества участников (максимум 10).
   * Возможность пригласить участников через ссылку или код комнаты.
   * Отображение списка участников с указанием активных микрофонов/камер. 
   * Индикатор качества соединения участников. 
   * Кнопка “поднять руку”.
3. Чат
   * Текстовый чат, доступный параллельно с видео, с возможностью отправки сообщений в общий чат. 
   * ~~Возможность прикреплять файлы (документы, изображения).~~
   * Режимы просмотра: "галерея" (все участники на экране) и "режим докладчика" (выделение активного говорящего).
4. Совместное использование экрана
   * Возможность для любого участника (с разрешения хоста) делиться своим экраном.
   * Поддержка показа всего экрана.
   * Поддержка показа отдельных окон приложений.
5. Запись
   * Функция записи конференции, со скачиванием локально.
6. Уведомления:
   * Уведомления о подключении/отключении участников, а также о сообщениях в чате.
7. Шифрование:
   * End-to-end шифрование видеосвязи для обеспечения конфиденциальности.
8. Аутентификация:
   * Авторизация пользователей через одноразовые ссылки или приглашения.

* ~~Автоматическая настройка качества видео и аудио в зависимости от скорости интернета.~~


# Дизайн:
* Основные модули (видео, чат, список участников) расположены гибко, что позволяет скрывать/показывать чат и список участников для удобства. 
* Использование всплывающих окон для показа информации об участниках (кто активен, кто отключил микрофон и т.д.).
* Окна участников размещены в сетке, которая автоматически подстраивается под количество участников. 
* Основной докладчик (активный пользователь) может занимать большую часть экрана, а остальные участники — меньшую.
* Мини-карты участников: В правом верхнем углу небольшие превью участников с отключенной камерой или звуком.
* Панель управления, внизу, с кнопками для включения/выключения камеры, микрофона, чата, показа экрана.
* Кнопка для завершения конференции выделена красным цветом и находится отдельно от других элементов.

### Режим "Фокус" (один активный докладчик на весь экран)
* Цель: Сосредоточить внимание на одном участнике (активном докладчике) и предоставить ему больше пространства для демонстрации содержимого. 
* Возможность для докладчика делиться своим экраном или презентацией в режиме "Фокус", чтобы участники могли видеть контент в высоком качестве.
* Активный докладчик занимает весь экран, что позволяет лучше видеть его, а также его презентацию или контент. 
* Текстовый чат остается доступным сбоку, чтобы участники могли задавать вопросы или общаться без нарушения потока презентации.
* Основное видео-окно: Активный докладчик (участник с камерой, который говорит или демонстрирует контент) 
занимает центральное видео-окно, заполняя весь экран.
* Участники, которые включили свои вебкамеры, отображаются в виде небольших миниатюр в нижней части экрана.
* Участники без включенной камеры отображаются с их стандартными аватарами или инициалами. 

* Выбор "закрепленного" окна: Пользователь может выбрать любое окно (включая миниатюры других участников или видео-докладчика)
в качестве "закрепленного". Это окно будет оставаться на экране независимо от того, кто говорит или демонстрирует контент.

* Для закрепления окна пользователь может нажать на соответствующую кнопку или значок на миниатюре, 
* что позволит ему сосредоточиться на конкретном участнике или контенте.




1. Архитектура приложения
   1.1. Клиентская часть
   Интерфейс пользователя (UI):

HTML/CSS/JavaScript с использованием фреймворков (например, React, Vue) для создания интерактивного интерфейса.
Элементы управления для подключения к конференции, включения/выключения видео и аудио, управления участниками и чата.
WebRTC:

Используется для передачи медиа-потоков (видео и аудио) между клиентами.
Поддерживает создание соединений и обработку SDP (Session Description Protocol) и ICE (Interactive Connectivity Establishment) кандидатов.
WebSocket:

Устанавливает соединение с сервером для обмена сигнализацией (SDP и ICE кандидаты).
Отправляет и получает сообщения о событиях (например, подключение нового участника).


1.2. Серверная часть
Spring Boot:

Обрабатывает HTTP-запросы и WebSocket-соединения.
Обеспечивает логику для управления конференциями, участниками и обменом сообщениями между ними.
GStreamer:

Создает и управляет пайплайнами для обработки медиа-потоков.
Реализует логику кастомного SFU, который маршрутизирует потоки между участниками конференции.
Обрабатывает SDP и ICE кандидаты, создавая необходимые ответы.
2. Логика работы приложения
   2.1. Клиент
   Подключение к серверу:

Клиент устанавливает WebSocket-соединение с сервером для обмена сигнализацией.
Создание WebRTC соединения:

Клиент создает RTCPeerConnection и отправляет SDP предложение серверу через WebSocket.
Обработка ответов:

Получает SDP ответ от сервера и устанавливает его как удаленное описание.
Обрабатывает ICE кандидатов, отправляемых от сервера, и добавляет их в RTCPeerConnection.
Передача медиа-потоков:

Передает локальные аудио и видео потоки в SFU через WebRTC.
Отображение потоков:

Отображает видео и аудио потоки других участников конференции.


2.2. Сервер
Прием WebSocket сообщений:

Сервер принимает сообщения от клиентов через WebSocket (SDP предложения, ICE кандидаты).
Управление конференцией:

Создает и управляет сессиями для каждого участника конференции.
Создает экземпляр GStreamerPipeline для обработки медиа-потоков.
Обработка SDP:

При получении SDP предложения создает ответ и отправляет его обратно клиенту.
Настраивает webrtcbin в GStreamer для обработки медиа-потоков.
Обработка ICE кандидатов:

Добавляет ICE кандидаты в webrtcbin и отправляет их другим участникам конференции.
Маршрутизация медиа-потоков:

Принимает медиа-потоки от одного участника и пересылает их другим участникам через GStreamer.
3. Взаимодействие между компонентами
   3.1. Подключение и сигнализация
   Клиент подключается к серверу через WebSocket и отправляет SDP предложение.
   Сервер обрабатывает предложение, создает SDP ответ и отправляет его обратно клиенту.
   Клиент и сервер обмениваются ICE кандидатами для установления сетевого соединения.
   3.2. Передача медиа-потоков
   После успешной установки соединения, клиент начинает отправлять медиа-потоки через WebRTC.
   Сервер обрабатывает входящие потоки с помощью GStreamer, маршрутизируя их другим участникам.
   3.3. Обработка и управление
   Сервер управляет состоянием конференции, включая информацию о текущих участниках, их статусах (онлайн/офлайн) и управлении медиа-потоками.
   Клиенты могут добавляться или удаляться из конференции в любой момент.
4. Примерный сценарий работы приложения
   Участник 1 открывает веб-приложение и подключается к конференции.
   Клиент отправляет SDP предложение серверу через WebSocket.
   Сервер обрабатывает предложение и отвечает с SDP ответом.
   Участник 1 начинает отправлять свой медиа-поток через WebRTC.
   Участник 2 подключается к конференции, отправляет SDP предложение и получает ответ.
   Сервер маршрутизирует медиа-потоки от Участника 1 к Участнику 2 через GStreamer.
   Участники общаются, и сервер управляет состоянием конференции.
